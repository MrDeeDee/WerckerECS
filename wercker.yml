box:
  id: httpd:2.4
  ports:
    - "80"
build:
  steps:
    - script:
      name: print Distro information
      code: cat /etc/*release
    - script:
      name: info about index.html
      code: cat ./index.html
    - script:
      name: info about page.html
      code: cat ./page.html
    - script:
      name: configuring default web-page
      code: cp ./page.html /usr/local/apache2/htdocs/
    - script:
      name: creating a file in container
      code: echo "<html><body><h1>AYE!!!</h1></body></html>" > /usr/local/apache2/htdocs/index.html
deploy:
  steps:
    - script:
      name: creating a file in container
      code: echo "<html><body><h1>AYE!!!</h1></body></html>" > /usr/local/apache2/htdocs/index.html
    - internal/docker-push:
      #registry: https://cloud.docker.com/u/dehdoc/repository/docker/
      repository: dehdoc/apache
      tag: my-tag
      username: $USERNAME
      password: $PASSWORD
      ports: "80"
      entrypoint: httpd-foreground
